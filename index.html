<!DOCTYPE html>
<html lang="em">


<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0">

    <title> Das Abenteuer beginnt</title>



    <style>
        html {
            overflow: hidden;
        }
        
        .container {
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
            display: grid;
            grid-template-columns: 33% 34% 33%;
            grid-template-rows: 8% 10% 52% 30%;
            width: 100%;
            height: 100vh;
            min-width: 300px;
            box-sizing: border-box;
        }
        
        .container div {
            padding: 5px;
            border: 5px, solid, black;
        }
        
        .header {
            width: 100%;
            height: 4.5vh;
            color: #ffffff;
            background-color: rgba(71, 71, 71, 0.801);
            background-repeat: no-repeat;
            text-justify: distribute;
            grid-column-start: 1;
            grid-column-end: 4;
            grid-row-start: 1;
            grid-row-end: 1;
        }
        
        body {
            height: 100vh;
            width: 100vw;
            margin: auto auto auto auto;
            background-image: url("https://dl.dropbox.com/s/1uuaw2aenozkzxj/taverne%202.jpg?dl=0");
            background-size: 100% 100%;
            background-position: center, center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
        
        .Charas {
            height: 55vh;
            width: 40vw;
            display: flex;
            margin-top: 3vh;
            margin-left: -3vw;
            align-content: center;
            justify-content: center;
            color: azure;
            font-size: 3.2vh;
            font-weight: 800;
            text-decoration: underline;
            grid-column-start: 2;
            grid-column-end: 3;
            grid-row-start: 3;
            grid-row-end: 4;
        }
        
        .char1 {
            height: 50vh;
            width: 15vw;
            margin: 3vh;
            border: ridge #828285 5px;
            background-color: rgba(62, 243, 38, 0.357);
            text-align: center;
            justify-content: center;
            align-items: center;
            justify-items: center;
            align-content: center;
            display: table;
            color: azure;
            font-size: 2.6vh;
            font-weight: 800;
        }
        
        .char2 {
            height: 50vh;
            width: 15vw;
            margin: 3vh;
            border: ridge #828285 5px;
            background-color: rgba(230, 23, 23, 0.377);
            text-align: center;
            color: azure;
            font-size: 2.6vh;
            font-weight: 800;
        }
        
        .char3 {
            height: 50vh;
            width: 15vw;
            margin: 3vh;
            border: ridge #828285 5px;
            background-color: rgb(35, 17, 233, 0.377);
            text-align: center;
            color: azure;
            font-size: 2.6vh;
            font-weight: 800;
        }
        
        .tooltip {
            height: 8vh;
            width: 42vw;
            margin-top: 4.5vh;
            margin-bottom: 2vh;
            margin-left: -3vw;
            text-justify: center;
            align-content: center;
            align-self: center;
            display: table;
            text-align: center;
            color: blanchedalmond;
            background-color: black;
            border: solid #626263 8px;
            grid-column-start: 2;
            grid-column-end: 3;
            grid-row-start: 2;
            grid-row-end: 3;
        }
        
        a {
            position: relative;
            padding: 2% 0 1% 1%;
            font-size: 2.5vh;
            font-weight: bold;
            color: #991919;
            text-decoration: none;
            text-transform: uppercase;
            transition: 0.5s;
            letter-spacing: 1px;
            width: 100%;
        }
        
        input[type=text],
        input[type=password] {
            height: 7vh;
            width: 18vw;
            display: inline-block;
            box-sizing: border-box;
            border: ridge #c2b508c9 4px;
        }
        
        .wahlButton {
            height: 4.5vh;
            width: 10vw;
            font-size: 2.2vh;
            font-weight: 600;
            margin-top: 2.5vh;
        }
        
        .audioControls {
            height: 2.2vh;
            width: 10vw;
        }
        
        .bottomRow {
            height: 6vh;
            width: 25vw;
            color: rgb(190, 151, 21);
            margin-top: 9.5vh;
            margin-left: 7.5vw;
            font-weight: 900;
            grid-column-start: 2;
            grid-column-end: 3;
            grid-row-start: 4;
            grid-row-end: 4;
        }
        
        #inputContainer,
        #greetingContainer {
            display: none;
        }
        
        .nmes {
            width: 24vw;
        }
    </style>

</head>

<body>

    <div class="container">

        <div class="header" id="head">
            <center>
                Entdecke dein eigenes Abenteuer auf dieser Welt..
            </center> <audio loop controls id="SpringSound" class="audioControls" src="https://dl.dropbox.com/scl/fi/hfo0wn5lidwlyoda7lqlz/Spring-Village.ogg?rlkey=qjeqicnq53bmpvt3b3px63up9&dl=0" type="audio/ogg">
            </audio>
        </div>
        <div class="tooltip" id="tooltip1">
            <p> “Es wird eine lange Reise, doch wenigstens habt ihr dann, wenn ihr alt und grau seid, etwas zu erzählen....” </p>

        </div>


        <div class="Charas">

            <div id="char1" class="char1">
                Schildmaid
                <img src="https://dl.dropbox.com/s/kncxtg33cqssp82/schildmaid%203.png?dl=0" class="responsive" height="222x" width="185px">
                <button id="b1" class="wahlButton">WÄHLE MICH!</button> </div>
            <!--classes für chars anlegen wrapper für img bg-->
            <div id="char2" class="char2">

                Tribesmen <img src="https://dl.dropbox.com/s/mimlbldehzz94sd/char3%203.jpg?dl=0" class="responsive" height="222" width="185">
                <button id="b2" class="wahlButton">WÄHLE MICH!</button>
            </div>


            <div id="char3" class="char3">

                Ritter <img src="https://dl.dropbox.com/s/ykkap0o6r00b478/char1%201.png?dl=0" class="responsive" height="225px" width="185px">
                <button id="b3" class="wahlButton">WÄHLE MICH!</button>

            </div>
        </div>
        <div class="bottomRow">

            <div id="greetingContainer">
                <span id="greetingMessage"></span>
            </div>

            <div id="inputContainer">
                <input type="text" id="nameInput" placeholder="Gib deinen Namen ein">
            </div>

        </div>
    </div>

    </div>



</body>
<script>
    function handleTouchButton(buttonSelector) {
        const button = document.querySelector(buttonSelector);
        let isTouched = false;

        button.addEventListener('touchstart', () => {
            isTouched = true;
        });

        button.addEventListener('touchend', () => {
            if (isTouched) {
                button.click();
                isTouched = false;
            }
        });
    }
    handleTouchButton('#b2');
    handleTouchButton('#b3');
    handleTouchButton('#b1');


    document.getElementById("b1").setAttribute("disabled", true);
    document.getElementById("b2").setAttribute("disabled", true);
    document.getElementById("b3").setAttribute("disabled", true);

    document.addEventListener("DOMContentLoaded", function() {
        const inputContainer = document.getElementById("inputContainer");
        const greetingContainer = document.getElementById("greetingContainer");
        const nameInput = document.getElementById("nameInput");
        const greetingMessage = document.getElementById("greetingMessage");

        const storedName = localStorage.getItem("userName");

        if (storedName) {
            // Falls der Name im Local Storage vorhanden ist, zeige die Begrüßungsnachricht an
            showGreeting(storedName);
        } else {
            // Falls der Name nicht im Local Storage vorhanden ist, zeige das Input-Feld an
            inputContainer.style.display = "block";
        }

        function handleTouchFocus(inputSelector) {
            const inputField = document.querySelector(inputSelector);

            inputField.addEventListener('touchstart', () => {
                inputField.focus();
            });
        }

        // Usage
        handleTouchFocus('#nameInput');
        nameInput.addEventListener("keydown", function(event) {
            if (event.key === "Enter") {
                event.preventDefault();
                const userName = nameInput.value.trim();

                if (userName !== "") {
                    // Speichere den Namen im Local Storage
                    localStorage.setItem("Username", userName);

                    inputContainer.style.display = "none";
                    showGreeting(userName);
                    document.getElementById("b1").removeAttribute("disabled");
                    document.getElementById("b2").removeAttribute("disabled");
                    document.getElementById("b3").removeAttribute("disabled");

                }
            }
        });


        function showGreeting(name) {
            greetingContainer.style.display = "block";
            greetingMessage.textContent = `Hallo, ${name}! Willkommen zurück.`;
        }
    });

    function getNameToGreet() {
        const storedName = localStorage.getItem("userName");
        return storedName ? storedName : null;
    }

    document.addEventListener("DOMContentLoaded", function() {
        const greetingMessage = document.getElementById("greetingMessage"); // schon oben  danach FADEEE

        const storedName = getNameToGreet();
        if (storedName) {
            // Zeige die Begrüßungsnachricht mit dem gespeicherten Namen an
            greetingMessage.textContent = `Hallo, ${storedName}! Willkommen zurück.`;
        } else {
            // Zeige eine Standard-Begrüßungsnachricht an, wenn kein Name vorhanden ist
            greetingMessage.textContent = "Hallo, Fremder! Willkommen auf unserer Website.";
        }
    });

    function validate() {
        var username = document.getElementById("username").value;
        var password = document.getElementById("password").value;
        if (username == "Maid" || "Knight" || "Lizard" && password == "Golden" || "Silver" || "Copper") {
            window.alert("Login successfully");
            window.location = "2Startszene1.html"; // Redirecting to other page.
            return false;
        } else {
            attempt--; // Decrementing by one.
            alert("You have left " + attempt + " attempt;");
        }
    }

    function playAudioOnLoad(audioElement, volume) {
        audioElement.volume = volume;
        audioElement.addEventListener('load', () => {
            audioElement.play();
        });
        if (audioElement.readyState >= HTMLMediaElement.HAVE_ENOUGH_DATA) {

            audioElement.play();
        }
    }

    function myFunction0(e) {

        let tooltip0 = 'Es wird eine lange Reise! Doch wenigstens habt ihr dann, wenn ihr alt und grau seid, etwas zu erzählen...';
        document.getElementById("tooltip1").innerHTML = tooltip0;
    }
    document.getElementById("head").onmouseover = function(event) {
        myFunction0(event)
    }

    document.getElementById("char1").onmouseover = function(event) {
        myFunction1(event)
    }

    document.getElementById("char2").onmouseover = function(event) {
        myFunction(event)
    }
    document.getElementById("char3").onmouseover = function(event) {
        myFunction2(event)
    }

    function myFunction(e) {

        let tooltip2 = 'Der Tribesman ist ein furchtloser Krieger.(+2 Angriff /+2 Verteidigung) <br> User Login: "Lizard" ||  Passwort: "Copper" ';
        document.getElementById("tooltip1").innerHTML = tooltip2;
    }

    function myFunction1(e) {

        let tooltip1 = 'Die Schildmaid verteidigt sich und ihren Clan! (+4 Verteidigung) <br>                 User Login: "Maid" || Passwort: "Golden"';
        document.getElementById("tooltip1").innerHTML = tooltip1;
    }

    function myFunction2(e) {

        let tooltip3 = 'Der Ritter lässt seinen Glauben durch NICHTS erschüttern.(+4 Angriff) <br>  User Login: "Knight" || Passwort:  "Silver"';
        document.getElementById("tooltip1").innerHTML = tooltip3;
    }

    // grüß funktion und tooltip ^

    //hero werte v 
    const MaidValues = {
        Title: "Anfänger",
        race: "Nord",
        Level: 1,
        Exp: 0,
        maxLp: 60,
        Lp: 60,
        Dmg: 5,
        Dodge: 8,
        Def: 4,
        Hit: 9,
    };

    const LizardValues = {
        Title: "Anfänger",
        race: "Tribesmen",
        Level: 1,
        Exp: 0,
        maxLp: 55,
        Lp: 55,
        Dmg: 7,
        Dodge: 7,
        Def: 2,
        Hit: 10,
    };

    const knightValues = {
        Title: "Anfänger",
        race: "Gothe",
        Level: 1,
        Exp: 0,
        maxLp: 50,
        Lp: 50,
        Dmg: 9,
        Dodge: 7,
        Def: 1,
        Hit: 11,
    };

    const heroValues = {
        Title: "",
        race: "",
        Level: "",
        Exp: "",
        maxLp: "",
        Lp: "",
        Dmg: "",
        Dodge: "",
        Def: "",
        Hit: "",
    };



    function buttonClick(event) {
        var clickedButtonId = event.target.id;

        if (clickedButtonId === 'b1') {
            console.log('Button 1 wurde geklickt.');

            heroValues.Title = MaidValues.Title;
            heroValues.race = MaidValues.race;
            heroValues.Level = MaidValues.Level;
            heroValues.Exp = MaidValues.Exp;
            heroValues.Lp = MaidValues.Lp;
            heroValues.maxLp = MaidValues.maxLp;
            heroValues.Dmg = MaidValues.Dmg;
            heroValues.Dodge = MaidValues.Dodge;
            heroValues.Def = MaidValues.Def;
            heroValues.Hit = MaidValues.Hit;
            saveHeroProfile();

        } else if (clickedButtonId === 'b2') {
            heroValues.Title = LizardValues.Title;
            heroValues.race = LizardValues.race;
            heroValues.Level = LizardValues.Level;
            heroValues.Exp = LizardValues.Exp;
            heroValues.Lp = LizardValues.Lp;
            heroValues.maxLp = LizardValues.maxLp;
            heroValues.Dmg = LizardValues.Dmg;
            heroValues.Dodge = LizardValues.Dodge;
            heroValues.Def = LizardValues.Def;
            heroValues.Hit = LizardValues.Hit;
            saveHeroProfile();

        } else if (clickedButtonId === 'b3') {

            heroValues.Title = knightValues.Title;
            heroValues.race = knightValues.race;
            heroValues.Level = knightValues.Level;
            heroValues.Exp = knightValues.Exp;
            heroValues.Lp = knightValues.Lp;
            heroValues.maxLp = knightValues.maxLp;
            heroValues.Dmg = knightValues.Dmg;
            heroValues.Dodge = knightValues.Dodge;
            heroValues.Def = knightValues.Def;
            heroValues.Hit = knightValues.Hit;
            console.log('Button 3 wurde geklickt.');
            saveHeroProfile();
        } else {
            console.log('Unbekannter Button wurde geklickt.');
        }
        location = "2StartSzene1.html";
    }


    document.getElementById("b1").addEventListener('click', buttonClick);
    document.getElementById("b2").addEventListener('click', buttonClick);
    document.getElementById("b3").addEventListener('click', buttonClick);

    function saveRace() {
        let oldRaceString = JSON.stringify(heroValues.race);
        localStorage.setItem("Race", oldRaceString);

    }

    function saveHeroProfile() { // nach jeder änderung an den zugehörigen werten!
        let oldHeroString = JSON.stringify(heroValues);
        localStorage.setItem("Attribute", oldHeroString);
        saveRace()
    }

    function getStoredName() { // dont wrap title in name..
        const storedName = localStorage.getItem("Username");

        if (storedName) {
            document.getElementById("heroName").innerHTML = "| " + storedName + " |" + "(Level: " + heroValues.Level + " )";
            document.getElementById("heroTitle").innerText = "[ " + heroValues.Title + " ]";
        } else {
            document.getElementById("heroName").innerHTML = "| " + "Held" + " |" + "(Level: " + heroValues.Level + " )";
            document.getElementById("heroTitle").innerHTML = "[ " + heroValues.Title; + " ]"; // erst nach const heroTitle..
        }
        return storedName ? storedName : null;
    }



    const inventar = [undefined, undefined, undefined, undefined];

    function saveInvi() {
        let oldInviString = JSON.stringify(inventar);
        localStorage.setItem("Inventar", oldInviString);
    }
    saveInvi();

    const questItemsFound = [undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, ]; // erste schlange..

    function saveProgress() {
        let oldQuestString = JSON.stringify(questItemsFound);
        localStorage.setItem("Progress", oldQuestString);
    }
    saveProgress();

    const verpflegung = [{ // ich arbeite mit dem begriff savedMoney aus loadcoins und reichtum[0].wert!
        name: 'Rationen',
        image: 'https://dl.dropbox.com/scl/fi/iw2x80tlnkuthz6cudvt8/Coin.png?rlkey=68rhbacrjtvxcawupqo3cypx1&dl=0',
        wert: "",
        anzahl: ""
    }];

    function saveRation() {
        let oldRationString = JSON.stringify(verpflegung[0].anzahl);
        localStorage.setItem("Verpflegung", oldRationString);
    }
    saveRation();

    const reichtum = [{
        name: 'Goldmünzen',
        image: 'https://www.geiger-edelmetalle.de/media/d4/4e/29/1680794041/b659f881b1e5a2f78f09f912f211a5e5.png',
        wert: ""
    }];

    function saveCoins() {
        let saveAsche = JSON.stringify((reichtum[0].wert));
        localStorage.setItem("Reichtum", saveAsche);
    }
    saveCoins();


    const springSound = document.getElementById("SpringSound");
    springSound.play();
    playAudioOnLoad(springSound, 0.2); // zu leise?
</script>

</html>
